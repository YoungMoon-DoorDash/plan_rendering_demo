{{> header}}
<script language='javascript' type='text/javascript'>
    function on_search() {
        var query = document.getElementById('search').value
        location.href = '/user?search=' + query
    }
</script>
{{> bodyheader}}
{{{banner}}}

<table style='margin-top:10px; width:860px;'>
<tr>
    <td nowrap><b>{{title}}</b></td>
    <td style='padding-left:16px;text-align:right;' nowrap>
        <input type='text' id='search' value="{{search}}" size='64' placeholder='Search by name'/>
        <button type='button' class='btn btn-outline-primary btn-sm' onclick='on_search()'>Find</button>
        <a href='/user/add' class='btn btn-outline-primary btn-sm'>Add user</a>
        <a href='/user/import' class='btn btn-outline-primary btn-sm'>Import</a>
    </td>
</tr>
</table>

<table class="table table-striped table-bordered">
<thead>
    <tr><th scope="col">Cx ID</th><th scope="col">Name</th><th scope="col">Email</th><th scope="col">Configuration</th></tr>
</thead>
<tbody>
{{#users}}
    <tr>
        <td scope="row" nowrap>{{id}}</td>
        <td nowrap><a href='/user/info?id={{id}}' class='btn btn-outline-primary btn-sm'>{{name}}</a> &nbsp;</td>
        <td nowrap>{{email}}</td>
        <td>{{{experiments}}}</td>
    </tr>
{{/users}}
{{^users}}
<tr><td colspan=3 style='text-align:center;'>There's no registered users.</td></tr>
{{/users}}
</tbody>
</table>

<script>
    var inputBox = document.getElementById('search')
    inputBox.addEventListener("keyup", function (event) {
        if (event.keyCode == 13) {
            on_search()
        }
     });
     inputBox.focus();
</script>
{{> footer}}