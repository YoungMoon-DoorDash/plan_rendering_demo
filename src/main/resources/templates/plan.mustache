{{> header}}
<script language='javascript' type='text/javascript'>
    function on_search() {
        var query = document.getElementById('search').value
        location.href = '/plan?search=' + query
    }
</script>
{{> bodyheader}}
{{{banner}}}

<table style='margin-top:10px;width:860px;'>
    <tr>
        <td nowrap><b>{{title}}</b></td>
        <td style='padding-left:16px;text-align:right;' nowrap>
            <input type='text' id='search' value="{{search}}" size='70' placeholder='Search by plan integration name'/>
            <button type='button' class='btn btn-outline-primary btn-sm' onclick='on_search()'>Find</button>
            <a href='/plan/import' class='btn btn-outline-primary btn-sm'>Import</a>
        </td>
    </tr>
</table>

<table class="table table-striped table-bordered btn-sm">
    <thead>
    <tr>
        <th scope="col">Plan ID</th>
        <th scope="col">Name</th>
        <th scope="col">Fee</th>
        <th scope="col">Recurrence Period</th>
        <th scope="col">Partner Plan</th>
        <th scope="col">Corporate Plan</th>
        <th scope="col">Employee Only</th>
        <th scope="col">Priority</th>
    </tr>
    </thead>
    <tbody>
    {{#plans}}
        <tr>
            <td scope="row" nowrap><a href='/plan/info?id={{id}}' style='width:100%;' class="btn btn-outline-primary btn-sm">{{id}}</a></td>
            <td>{{integration_name}}</td>
            <td>{{fee}}</td>
            <td>{{recurrence_interval_type}}</td>
            <td>{{is_partner_plan}}</td>
            <td>{{is_corporate_plan}}</td>
            <td>{{employees_only}}</td>
            <td>{{priority}}</td>
        </tr>
    {{/plans}}
    {{^plans}}
        <tr><td colspan=9 style='text-align:center;'>There's no registered plans.</td></tr>
    {{/plans}}
    </tbody>
</table>

<script>
    let inputBox = document.getElementById('search')
    inputBox.addEventListener("keyup", function (event) {
        if (event.keyCode == 13) {
            on_search()
        }
    });
    inputBox.focus();
</script>
{{> footer}}